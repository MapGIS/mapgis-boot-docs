(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{288:function(a,s,t){"use strict";t.r(s);var e=t(3),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"项目打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目打包"}},[a._v("#")]),a._v(" 项目打包")]),a._v(" "),s("p",[s("strong",[a._v("单体版打包可参考")]),s("a",{attrs:{href:"https://github.com/MapGIS/MapGIS-Boot/blob/master/mapgis-local-packer",target:"_blank",rel:"noopener noreferrer"}},[a._v("mapgis-local-packer"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("strong",[a._v("微服务版打包可参考")]),s("a",{attrs:{href:"https://github.com/MapGIS/MapGIS-Boot/blob/master/mapgis-cloud-packer",target:"_blank",rel:"noopener noreferrer"}},[a._v("mapgis-cloud-packer"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"传统打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传统打包"}},[a._v("#")]),a._v(" 传统打包")]),a._v(" "),s("h3",{attrs:{id:"单体版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单体版"}},[a._v("#")]),a._v(" 单体版")]),a._v(" "),s("p",[a._v("进入到"),s("code",[a._v("mapgis-local-packer")]),a._v("目录。")]),a._v(" "),s("h4",{attrs:{id:"打包前提"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包前提"}},[a._v("#")]),a._v(" 打包前提")]),a._v(" "),s("p",[a._v("打包之前需先添加支持环境，请执行"),s("code",[a._v("add-support.bat")]),a._v("会自动添加支持环境到 release 目录内。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 依赖支持环境")]),a._v("\nadd-support.bat\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),s("p",[a._v("外部用户请访问"),s("a",{attrs:{href:"https://pan.baidu.com/s/10kjngShwtrpdDnb7Mu4-lg",target:"_blank",rel:"noopener noreferrer"}},[a._v("链接：https://pan.baidu.com/s/10kjngShwtrpdDnb7Mu4-lg 提取码：toub"),s("OutboundLink")],1),a._v("，获取"),s("code",[a._v("03-Support")]),a._v("支持环境内容添加到release目录内")])]),a._v(" "),s("h4",{attrs:{id:"打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),s("p",[a._v("进入"),s("code",[a._v("package")]),a._v("目录，执行以下命令，进行打包：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 打包")]),a._v("\npackage.bat\n")])])]),s("p",[a._v("打包成果放到了release目录内，通过"),s("code",[a._v("os-arch")]),a._v("进行分类存放，形成如下的目录结构。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("├─package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("打包脚本"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n│  ├─package.bat\n├─release"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("打包后自动生成"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n│  ├─win-x86_64\n│  ├─linux-x86_64\n")])])]),s("h3",{attrs:{id:"微服务版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微服务版"}},[a._v("#")]),a._v(" 微服务版")]),a._v(" "),s("p",[a._v("进入到"),s("code",[a._v("mapgis-cloud-packer")]),a._v("目录。")]),a._v(" "),s("h4",{attrs:{id:"打包前提-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包前提-2"}},[a._v("#")]),a._v(" 打包前提")]),a._v(" "),s("p",[a._v("打包之前需先添加支持环境，请执行"),s("code",[a._v("add-support.bat")]),a._v("会自动添加支持环境到 release 目录内。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 依赖支持环境")]),a._v("\nadd-support.bat\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),s("p",[a._v("外部用户请访问"),s("a",{attrs:{href:"https://pan.baidu.com/s/10kjngShwtrpdDnb7Mu4-lg",target:"_blank",rel:"noopener noreferrer"}},[a._v("链接：https://pan.baidu.com/s/10kjngShwtrpdDnb7Mu4-lg 提取码：toub"),s("OutboundLink")],1),a._v("，获取"),s("code",[a._v("03-Support")]),a._v("支持环境内容添加到release目录内")])]),a._v(" "),s("h4",{attrs:{id:"打包-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包-2"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),s("p",[a._v("进入"),s("code",[a._v("package")]),a._v("目录，执行以下命令，进行打包：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 打包")]),a._v("\npackage.bat\n")])])]),s("p",[a._v("打包成果放到了release目录内，通过"),s("code",[a._v("os-arch")]),a._v("进行分类存放，形成如下的目录结构。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("├─package"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("打包脚本"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n│  ├─package.bat\n├─release"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("打包后自动生成"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n│  ├─win-x86_64\n│  ├─linux-x86_64\n")])])]),s("h2",{attrs:{id:"docker-compose打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose打包"}},[a._v("#")]),a._v(" Docker Compose打包")]),a._v(" "),s("h3",{attrs:{id:"打包前提-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包前提-3"}},[a._v("#")]),a._v(" 打包前提")]),a._v(" "),s("p",[a._v("先配置Docker环境，可参考"),s("RouterLink",{attrs:{to:"/zh/guide/document/deploy.html#安装docker和docker-compose"}},[a._v("安装Docker和Docker Compose")])],1),a._v(" "),s("h3",{attrs:{id:"单体版-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单体版-2"}},[a._v("#")]),a._v(" 单体版")]),a._v(" "),s("p",[a._v("进入到"),s("code",[a._v("mapgis-local-packer")]),a._v("目录。")]),a._v(" "),s("h4",{attrs:{id:"环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("h5",{attrs:{id:"调整镜像参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调整镜像参数"}},[a._v("#")]),a._v(" 调整镜像参数")]),a._v(" "),s("p",[a._v("编辑"),s("code",[a._v("docker/linux-arch/deploy.sh")]),a._v("中的镜像标签等参数。")]),a._v(" "),s("h5",{attrs:{id:"上传打包文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传打包文件"}},[a._v("#")]),a._v(" 上传打包文件")]),a._v(" "),s("p",[a._v("将与Linux服务器架构一致的产品包和Docker脚本拷贝到具备联网环境的该服务器下。")]),a._v(" "),s("blockquote",[s("p",[a._v("比如linux-x86_64的产品包需要到x86_64架构的Linux环境下进行镜像制作（可通过uname -m查询架构）")])]),a._v(" "),s("p",[a._v("形成如下的目录结构，确保docker、docker-package和release在同一目录下：")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("├─docker\n│  ├─linux-x86_64\n├─docker-package\n├─release(传统打包自动生成)\n│  ├─linux-x86_64\n├─docker-package(docker打包后自动生成)\n")])])]),s("h4",{attrs:{id:"打包-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包-3"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入到docker-package目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" docker-package\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行打包(根据服务器架构选择相应的打包脚本，比如当前是x86_64就选择package-linux-x86_64.sh脚本)*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" package-linux-x86_64.sh\n")])])]),s("h3",{attrs:{id:"微服务版-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微服务版-2"}},[a._v("#")]),a._v(" 微服务版")]),a._v(" "),s("p",[a._v("进入到"),s("code",[a._v("mapgis-cloud-packer")]),a._v("目录。")]),a._v(" "),s("h4",{attrs:{id:"环境准备-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备-2"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("h5",{attrs:{id:"调整镜像参数-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调整镜像参数-2"}},[a._v("#")]),a._v(" 调整镜像参数")]),a._v(" "),s("p",[a._v("编辑"),s("code",[a._v("docker/linux-arch/deploy.sh")]),a._v("中的镜像标签等参数。")]),a._v(" "),s("h5",{attrs:{id:"上传打包文件-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传打包文件-2"}},[a._v("#")]),a._v(" 上传打包文件")]),a._v(" "),s("p",[a._v("将与Linux服务器架构一致的产品包和Docker脚本拷贝到具备联网环境的该服务器下。")]),a._v(" "),s("blockquote",[s("p",[a._v("比如linux-x86_64的产品包需要到x86_64架构的Linux环境下进行镜像制作（可通过uname -m查询架构）")])]),a._v(" "),s("p",[a._v("形成如下的目录结构，确保docker、docker-package和release在同一目录下：")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("├─docker\n│  ├─linux-x86_64\n├─docker-package\n├─release(传统打包自动生成)\n│  ├─linux-x86_64\n├─docker-package(docker打包后自动生成)\n")])])]),s("h4",{attrs:{id:"打包-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包-4"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入到docker-package目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" docker-package\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行打包(根据服务器架构选择相应的打包脚本，比如当前是x86_64就选择package-linux-x86_64.sh脚本)*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" package-linux-x86_64.sh\n")])])]),s("h2",{attrs:{id:"kubernetes打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes打包"}},[a._v("#")]),a._v(" Kubernetes打包")]),a._v(" "),s("h3",{attrs:{id:"单体版-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单体版-3"}},[a._v("#")]),a._v(" 单体版")]),a._v(" "),s("p",[a._v("进入到"),s("code",[a._v("mapgis-local-packer")]),a._v("目录。")]),a._v(" "),s("h4",{attrs:{id:"环境准备-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备-3"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("p",[a._v("将"),s("code",[a._v("k8s-package")]),a._v("拷贝到linux服务器下，然后将需要的依赖放置到"),s("code",[a._v("support")]),a._v("目录内，形成如下目录：")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("├─k8s-package\n│  ├─support(将依赖拷贝到该处)\n│  │  ├─linux-x86-64\n│  │  ├─linux-arm64\n├─k8s-release(打包后自动生成)\n")])])]),s("h4",{attrs:{id:"打包-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包-5"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入到k8s-package目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" k8s-package\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行打包(根据服务器架构选择相应的打包脚本，比如当前是x86_64就选择package-linux-x86_64.sh脚本)")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" package-linux-x86_64.sh\n")])])]),s("h3",{attrs:{id:"微服务版-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微服务版-3"}},[a._v("#")]),a._v(" 微服务版")]),a._v(" "),s("p",[a._v("进入到"),s("code",[a._v("mapgis-cloud-packer")]),a._v("目录。")]),a._v(" "),s("h4",{attrs:{id:"环境准备-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备-4"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("p",[a._v("将"),s("code",[a._v("k8s-package")]),a._v("拷贝到linux服务器下，然后将需要的依赖放置到"),s("code",[a._v("support")]),a._v("目录内，形成如下目录：")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("├─k8s-package\n│  ├─support(将依赖拷贝到该处)\n│  │  ├─linux-x86-64\n│  │  ├─linux-arm64\n├─k8s-release(打包后自动生成)\n")])])]),s("h4",{attrs:{id:"打包-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包-6"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入到k8s-package目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" k8s-package\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行打包(根据服务器架构选择相应的打包脚本，比如当前是x86_64就选择package-linux-x86_64.sh脚本)")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" package-linux-x86_64.sh\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);